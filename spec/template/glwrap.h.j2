{% extends "base/wrap.h.j2" %}
{% block content %}
{{ super() }}

{% for func in functions %}
#ifndef direct_{{ func.name }}
static inline void push_{{ func.name }}({{ func.name }}_ARG_EXPAND) {
    {{ func.name }}_PACKED *packed_data = malloc(sizeof({{ func.name }}_PACKED));
    packed_data->format = {{ func.name }}_FORMAT;
    packed_data->func = {{ func.name }};
    {% for arg in func.args %}
    packed_data->args.a{{ loop.index }} = {{ arg.name }};
    {% endfor %}
    glPushCall((void *)packed_data);
}
#endif
{% endfor %}
{% endblock %}